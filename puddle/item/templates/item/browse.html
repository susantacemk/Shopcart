{% extends "core/base.html" %}

{% block title %}
    Browse
{% endblock title %}

{% block content %}
<div class="pb-6 grid grid-cols-1 md:grid-cols-4 gap-6">
  
  <!-- Sidebar (full width on mobile, 1 col on desktop) -->
  <div class="col-span-1 bg-white dark:bg-gray-800 rounded-xl p-4 shadow">
    <form method="get" action="{% url 'item:browse' %}">
      <input 
        name="query" 
        class="w-full text-black py-3 px-4 border rounded-xl mb-2" 
        type="text" 
        value="{{ query }}" 
        placeholder="Find a bike, a chair or car..."
      >
      <button 
        class="w-full py-2 px-4 text-lg bg-teal-500 text-white rounded-xl hover:bg-teal-600">
        Search
      </button>
    </form>

    <hr class="my-6">

    <p class="font-semibold">Categories</p>
    <ul class="space-y-1">
      {% for category in categories %}
        <li class="py-2 px-3 rounded-xl 
            {% if category.id == category_id %} bg-blue-500 text-white{% else %} hover:text-green-500 font-semibold{% endif %}">
          <a href="{% url 'item:browse' %}?query={{ query }}&category={{ category.id }}">
            {{ category.name }}
          </a>
        </li>
      {% endfor %}
    </ul>

    <hr class="my-6">

    <p class="font-semibold">Clear filters</p>
    <a href="{% url 'item:browse' %}" 
      class="mt-2 inline-block w-full text-center py-2 px-4 bg-yellow-500 text-white text-lg rounded-xl hover:bg-yellow-600">
      Clear
    </a>
  </div>

  <!-- Items Grid -->
  <div class="col-span-1 md:col-span-3">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for item in items %}
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition">
          <!-- Image -->
          <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-full h-48 object-cover">

          <!-- Card Content -->
          <div class="p-4">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100">{{ item.name }}</h3>
            <span class="block text-md font-bold text-green-600 mb-2">₹{{ item.price }}</span>

            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
              {{ item.description|truncatewords:20 }}
            </p>

            <a href="{% url 'item:readMore' item.id %}" 
              class="inline-block w-full text-center px-4 py-2 rounded-lg text-white font-medium 
                     bg-gradient-to-r from-blue-500 to-purple-600 
                     hover:from-blue-600 hover:to-purple-700 transition">
              Read More →
            </a>
          </div>
        </div>
      {% empty %}
        <p class="col-span-3 text-center text-gray-500 dark:text-gray-400">No items found.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock content %}
